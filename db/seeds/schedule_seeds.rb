bike_schedules = {
  george: ['2021-09-18', '2023-03-01', '2022-08-18', '2023-04-05', '2022-07-08'],
  may: ['2023-04-14', '2023-04-10', '2023-03-22'],
  frankie: ['2023-04-20', '2021-09-23', '2023-03-07', '2021-10-17', '2022-08-28'],
  aliko: ['2021-09-03', '2022-07-05', '2021-10-30', '2022-04-30', '2021-09-07', '2023-01-29', '2023-04-01', '2023-04-23', '2023-03-16', '2022-05-19', '2022-05-27', '2021-12-15', '2022-05-06'],
  michael: ['2021-12-22', '2021-12-09', '2022-05-02', '2023-01-10', '2022-07-26', '2021-11-13', '2023-01-16', '2022-06-19', '2022-07-20', '2023-03-06', '2023-04-10', '2021-12-18'],
  gina: ['2023-03-06', '2021-12-24', '2022-07-08', '2021-12-20', '2022-08-29', '2022-05-23', '2023-03-30', '2021-11-23', '2022-06-28', '2021-11-08', '2021-11-09'],
  audrey: ['2022-05-24', '2021-11-07', '2023-03-11', '2023-02-21', '2021-12-02', '2022-05-05', '2023-01-02', '2023-03-11', '2021-09-20', '2022-07-29', '2021-10-03', '2023-01-05', '2023-01-20', '2022-07-17', '2021-10-23', '2023-03-07', '2021-11-11', '2023-03-28', '2021-09-05', '2022-06-24', '2021-10-07'],
  ayodeji: ['2021-10-26', '2023-03-26', '2023-02-27', '2022-07-21', '2022-06-02', '2021-12-13', '2022-05-19', '2023-02-14', '2021-12-10', '2023-04-08', '2021-12-20', '2023-02-03', '2023-01-28', '2021-09-03', '2021-09-21', '2022-06-14', '2022-06-01', '2022-06-24', '2021-12-15'],
  wolfgang: ['2021-09-28', '2021-09-03', '2021-12-02', '2023-01-04'],
  bianca: ['2023-04-20', '2021-10-20', '2023-01-16'],
  kai: ['2021-10-24', '2022-07-19', '2023-02-28', '2023-01-30', '2022-07-27'],
  kate: ['2023-03-17', '2021-12-04', '2022-05-12', '2022-06-13', '2022-05-22', '2023-01-08', '2022-08-23', '2023-01-11', '2022-07-25', '2021-12-03'],
  albert: ['2021-12-19', '2021-11-22', '2023-03-24', '2022-07-12'],
  christin: ['2021-09-08', '2022-07-28', '2021-09-17', '2022-07-22', '2022-04-28', '2021-09-21'],
  howard: ['2021-10-11', '2023-04-10', '2023-04-09', '2023-04-08', '2021-12-16', '2022-08-30', '2021-09-04', '2022-06-06', '2023-04-18', '2021-09-08', '2022-05-08']
}

def manage_bookings(bike, date)
  return if bike.bookings.on_date(date).empty?

  bike.bookings.on_date(date).destroy_all # notify_users via email or in-app notification

  puts "Apologies for the inconvenience. #{bike.name} has been marked unavilable due to some unforseen circumstances. Please make an alternate booking."
end

bike_schedules.each do |rider_name, unavailable_dates|
  bike = Bike.find_by(name: rider_name)

  next unless bike

  unavailable_dates.each do |date|
    manage_bookings(bike, date)
    bike.schedules.create!(unavailable_date: date)
  end
end
